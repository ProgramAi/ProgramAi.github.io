<!DOCTYPE html><html><head><script type="application/ld+json">{ 
    "@context": "http://schema.org", 
    "@type": "BlogPosting",
    "headline": "Grunt: Automatizando tarefas de build",
    "image": "https://programai.com/img/posts/web/frontend/grunt/featured.png",
    "genre": "Frontend", 
    "keywords": "Build Css Grunt Javascript Node.js Tutoriais", 
    "wordcount":  2443 ,
    "publisher": {
      "@type": "Organization",
      "name": "ProgramAi",
      "logo": "https://programai.com/img/programai-header-logo.png"
    },
    "url": "https://programai.com/web/frontend/grunt",
    "datePublished": "2015-10-11",
    "dateCreated": "2015-10-11",
    "dateModified": "2015-10-11",
    "description": "Trabalha com Frontend Web e não utiliza o Grunt? Está perdendo tempo. Literalmente! Aprenda a instalar, configurar, e aumente sua produtividade agora mesmo.",
    "articleBody": "\n\n\u003cp\u003eVocê já parou para pensar em quantas tarefas repetidas você executa na hora de fazer \u003cem\u003ebuild/deploy\u003c/em\u003e do seu projeto de\nFrontend?\u003c/p\u003e\n\n\u003cp\u003eVamos pensar em algumas mais comuns:\u003c/p\u003e\n\n\u003cul style=\"position: relative; left: 30px\"\u003e\n  \u003cli\u003econcatenar arquivos css/js;\u003c/li\u003e\n  \u003cli\u003eminificar css/js;\u003c/li\u003e\n  \u003cli\u003eprocessar arquivos sass/less;\u003c/li\u003e\n  \u003cli\u003eminificar imagens;\u003c/li\u003e\n  \u003cli\u003eminificar html;\u003c/li\u003e\n  \u003cli\u003efazer upload dos arquivos para o servidor;\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eAgora tente pensar em quanto tempo você gasta diariamente na realização dessas tarefas.\n Por alto, podemos dizer que perde-se tempo suficiente para até 5 xícaras de café na copa :D\u003c/p\u003e\n\n\u003cp\u003eMas então você deve se perguntar, como agilizar esse processo e ganhar essas preciosas 5 doses diárias de café a mais?\n Eu te respondo, com o \u003ca href=\"http://gruntjs.com/\" target=\"_blank\"\u003eGrunt\u003c/a\u003e!.\u003c/p\u003e\n\n\u003ch2 id=\"o-que-é-grunt\"\u003eO que é Grunt?\u003c/h2\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/posts/web/frontend/grunt/duvida.jpg\" alt=\"O que é Grunt?\" title=\"O que é Grunt?\" class=\"section-image\"\u003e\u003c/p\u003e\n\n\u003cp\u003eO Grunt é uma ferramenta de linha de comando criada pelo \u003ca href=\"https://twitter.com/cowboy\" target=\"_blank\"\u003eBen Alman\u003c/a\u003e,\ne é basicamente um executor tarefas. Sabe todas as tarefas repetitivas listadas agora a pouco,\nalém de todas as outras que você realiza mas não foram listadas? Você pode deixar que o Grunt execute elas para você.\u003c/p\u003e\n\n\u003ch3 id=\"por-que-usar-um-executor-de-tarefas\"\u003ePor que usar um executor de tarefas?\u003c/h3\u003e\n\n\u003cp\u003eEm uma palavra: automação. Quanto menos trabalho você tem executando tarefas repetitivas como minificação, compilação,\nteste de unidade, validação, etc, mais fácil se torna o seu trabalho.\u003c/p\u003e\n\n\u003cp\u003eDepois de configurado, um executor de tarefas pode realizar boa parte do trabalho para você com basicamente nenhum esforço.\u003c/p\u003e\n\n\u003ch3 id=\"por-que-usar-o-grunt\"\u003ePor que usar o Grunt?\u003c/h3\u003e\n\n\u003cp\u003eO ecossistema do Grunt é enorme e continua crescendo diariamente. Com literalmente centenas de plugins disponíveis,\nvocê pode usar o Grunt para automatizar praticamente qualquer coisa com o mínimo de esforço.\u003c/p\u003e\n\n\u003cp\u003eSe ninguém tiver desenvolvido o que você precisa, criar e publicar o seu próprio plugin do Grunt é extremamente fácil.\nAqui você encontra mais detalhes de\n\u003ca href=\"http://gruntjs.com/creating-plugins\" target=\"_blank\"\u003ecomo criar o seu plugin para o Grunt\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"quem-usa-grunt\"\u003eQuem usa Grunt?\u003c/h3\u003e\n\n\u003cp\u003eAtualmente o Grunt é utilizado em uma grande quantidade de projetos Web pelo mundo afora.\nProjetos como jQuery e Bootstrap utilizam o Grunt para automatizar o build.\nA imagem abaixo demonstra algumas empresas/projetos que utilizam o Grunt.\u003c/p\u003e\n\n\u003cfigure class=\"post-figure medium\"\u003e  \n    \u003cimg src=\"/img/posts/web/frontend/grunt/quem-usa-grunt.png\" class=\"responsive-image\"\n      alt=\"Empresas/Projetos que utilizam Grunt.\"\u003e  \n  \u003cfigcaption class=\"caption\"\u003eEmpresas/Projetos que utilizam Grunt.\u003c/figcaption\u003e\n\u003c/figure\u003e\n\n\u003cp\u003eEnfim, atualmente considero o Grunt como uma ferramenta indispensável para qualquer projeto de Frontend Web.\nSe você ainda não está usando, está perdendo tempo (literalmente)!\u003c/p\u003e\n\n\u003cp\u003eMais detalhes sobre a ferramenta podem ser encontrados na\n\u003ca href=\"http://gruntjs.com/\" target=\"_blank\"\u003epágina oficial do Grunt\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch2 id=\"grunt-primeiros-passos\"\u003eGrunt: Primeiros Passos\u003c/h2\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/posts/web/frontend/grunt/primeiros-passos.jpg\" \n  alt=\"Grunt: Primeiros Passos\" title=\"Grunt: Primeiros Passos\" class=\"section-image\"\u003e\u003c/p\u003e\n\n\u003cp\u003eEntão, vou usar o Grunt, do que eu preciso?\u003c/p\u003e\n\n\u003cp\u003eO primeiro passo é entender como o Grunt funciona. O Grunt é implementado em Javascript e roda no\n\u003ca href=\"https://nodejs.org/en/\" target=\"_blank\"\u003eNode.js\u003c/a\u003e, então antes de instalar o Grunt você vai precisar ter o\n\u003cem\u003enode\u003c/em\u003e e o \u003cem\u003enpm\u003c/em\u003e instalados. Caso você não tenha seguem alguns links de\n\u003ca href=\"http://blog.teamtreehouse.com/install-node-js-npm-windows\" target=\"_blank\"\u003ecomo instalar o node e npm no Windows\u003c/a\u003e\ne \u003ca href=\"https://www.digitalocean.com/community/tutorials/como-instalar-o-node-js-em-um-servidor-ubuntu-14-04-pt\" target=\"_blank\"\u003ecomo instalar o node e npm no Ubuntu\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"instalação-do-grunt\"\u003eInstalação do Grunt\u003c/h3\u003e\n\n\u003cp\u003eTendo instalado o node e o npm na sua máquina, o único trabalho para instalar o Grunt é rodar o seguinte comando:\u003c/p\u003e\n\n\u003cpre\u003e\n  npm install -g grunt-cli\n\u003c/pre\u003e\n\n\u003cp\u003eIsto vai habilitar o comando \u003ccode\u003egrunt\u003c/code\u003e no terminal.\u003c/p\u003e\n\n\u003cp\u003eComo você já deve ter notado, instalamos o \u003cem\u003egrunt-cli\u003c/em\u003e e não o \u003cem\u003egrunt\u003c/em\u003e, a função do \u003cem\u003egrunt-cli\u003c/em\u003e é executar o\n\u003cem\u003egrunt\u003c/em\u003e configurado para o projeto. Dessa forma é possível ter vários projetos, cada um rodando uma versão diferente do\n\u003cem\u003egrunt\u003c/em\u003e sem problemas.\u003c/p\u003e\n\n\u003ch3 id=\"configurando-o-projeto-para-utilizar-o-grunt\"\u003eConfigurando o projeto para utilizar o Grunt\u003c/h3\u003e\n\n\u003cp\u003ePara um projeto utilizar o Grunt, são necessários pelo menos dois arquivos, o \u003ccode\u003epackage.json\u003c/code\u003e e o\n\u003ccode\u003eGruntfile.js\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"package-json\"\u003epackage.json\u003c/h3\u003e\n\n\u003cp\u003eO arquivo \u003ccode\u003epackage.json\u003c/code\u003e é utilizado pelo \u003ccode\u003enpm\u003c/code\u003e para armazenar os meta-dados do seu projeto.\nInformações como nome do projeto, autor, url, licença, repositório e dependências, são todas armazenadas neste arquivo.\u003c/p\u003e\n\n\u003cp\u003eEntão é por isso que o Grunt precisa dele, ao instalar um plugin do grunt no projeto, esse plugin é registrado como\ndependência no arquivo package.json.\u003c/p\u003e\n\n\u003cp\u003eO arquivo \u003cem\u003epackage.json\u003c/em\u003e deve estar no diretório raiz da sua aplicação. Você pode criar um através do comando\n\u003ccode\u003enpm init\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eAo rodar o comando \u003cem\u003enpm init\u003c/em\u003e ele vai solicitar os dados do seu projeto, nem todos são obrigatórios.\nExecutei o comando aqui, preenchi algumas informações e gerei o seguinte arquivo \u003cem\u003epackage.json\u003c/em\u003e:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"json\"\u003e\n{\n  \"name\": \"projeto\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Meu Projeto\",\n  \"main\": \"package.json\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\"\n  },\n  \"author\": \"Andrew Cavalcante Pacifico\",\n  \"license\": \"Apache\"\n}\n\u003c/pre\u003e\n\n\u003cp\u003ePara instalar o Grunt e os plugins dele no seu projeto, utilize sempre o comando\n\u003ccode\u003enpm install \u0026lt;dependência\u0026gt; --save-dev\u003c/code\u003e, dessa forma a dependência é automaticamente adicionada à sessão\n\u003cem\u003edevDependencies\u003c/em\u003e do arquivo \u003cem\u003epackage.json\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eA importância de adicionar a dependência à sessão \u003cem\u003edevDependencies\u003c/em\u003e do \u003cem\u003epackage.json\u003c/em\u003e,\né que caso você precise configurar o projeto novamente em uma outra máquina, basta rodar o comando \u003ccode\u003enpm install\u003c/code\u003e,\ne todas as dependências do projeto (incluindo o Grunt e seus plugins) serão automaticamente instaladas.\u003c/p\u003e\n\n\u003cp\u003eEntão vamos instalar o Grunt localmente em nosso projeto. Para isso basta executar o seguinte comando:\u003c/p\u003e\n\n\u003cpre\u003e\n  npm install grunt --save-dev\n\u003c/pre\u003e\n\n\u003cp\u003eUm diretório chamado \u003cem\u003enode-modules\u003c/em\u003e deve ter sido adicionado ao seu projeto, este diretório conterá todas as\ndependências do seu projeto instaladas via \u003cem\u003enpm\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eEste diretório deve conter um outro diretório chamado \u003cem\u003egrunt\u003c/em\u003e, o que indica que o Grunt foi instalado\nlocalmente no seu projeto.\u003c/p\u003e\n\n\u003cp\u003eSe você der uma olhada no arquivo \u003cem\u003epackage.json\u003c/em\u003e verá que ele conterá agora a seguinte sessão:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"json\"\u003e\n\"devDependencies\": {\n  \"grunt\": \"~0.4.5\"\n}\n\u003c/pre\u003e\n\n\u003cp\u003eIsso significa que o grunt foi adicionado como dependência do projeto.\u003c/p\u003e\n\n\u003cp\u003eCaso você esteja utilizando algum software de controle de versão para o seu projeto, é importante ressaltar que apenas\no arquivo \u003cem\u003epackage.json\u003c/em\u003e precisa ser versionado, o diretório \u003cem\u003enode_modules\u003c/em\u003e deve ser deixado de fora, uma vez que ele\né gerado automaticamente.\u003c/p\u003e\n\n\u003ch3 id=\"gruntfile-js\"\u003eGruntfile.js\u003c/h3\u003e\n\n\u003cp\u003eO \u003cem\u003eGruntfile.js\u003c/em\u003e é o arquivo onde você vai definir e as tarefas e configurar os plugins do Grunt.\nEle é um arquivo \u003cem\u003eJavascript\u003c/em\u003e que deve ser colocado na raiz do seu projeto junto com o \u003cem\u003epackage.json\u003c/em\u003e, e assim como ele,\ntambém deve ser versionado.\u003c/p\u003e\n\n\u003cp\u003eO \u003cem\u003eGruntfile\u003c/em\u003e é formado basicamente pela configuração do projeto/plugins, pelo carregamento dos plugins do Grunt,\ndefinição das tarefas, e uma função que engloba tudo isso. Abaixo temos um exemplo de um \u003cem\u003eGruntfile\u003c/em\u003e básico.\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\n  module.exports = function(grunt) {\n    // configuração dos plugins\n    grunt.initConfig({\n    });\n\n    // carregamento dos plugins\n    grunt.loadNpmTasks('nome-do-plugin');\n\n    // definição das tarefas\n    grunt.registerTask('default', []);\n  };\n\u003c/pre\u003e\n\n\u003cp\u003eNo código acima é possível perceber as três seções principais mencionadas.\u003c/p\u003e\n\n\u003cp\u003eToda a configuração dos plugins e tarefas do Grunt deve ser feita através de um objeto passado como parâmetro para a\nfunção \u003ccode data-enlighter-language=\"js\"\u003egrunt.initConfig()\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eTodos os plugins instalados devem ser carregados através da chamada da função\n\u003ccode data-enlighter-language=\"js\"\u003egrunt.loadNpmTasks()\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eE por fim, você pode definir as suas tarefas através da função \u003ccode data-enlighter-language=\"js\"\u003egrunt.registerTask()\u003c/code\u003e.\nCada plugin instalado automaticamente cria uma tarefa com o seu nome, mas se o objetivo é automatizar,\nnão faz sentido termos que chamar todas as tarefas uma por uma, então você pode definir uma tarefa \u003cem\u003edefault\u003c/em\u003e que é\nexecutada sempre que o comando \u003ccode\u003egrunt\u003c/code\u003e for executado, e pode configurar esta tarefa para executar todas as outras.\u003c/p\u003e\n\n\u003ch2 id=\"plugins-do-grunt\"\u003ePlugins do Grunt\u003c/h2\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/posts/web/frontend/grunt/grunt-plugins.png\" \n  alt=\"Plugins do Grunt\" title=\"Plugins do Grunt\" class=\"section-image\"\u003e\u003c/p\u003e\n\n\u003cp\u003eAgora que você já sabe como instalar e configurar o \u003cem\u003eGrunt\u003c/em\u003e, só o que falta é começar instalar os plugins.\nComo eu mencionei no início do artigo, o \u003cem\u003eGrunt\u003c/em\u003e já tem plugin pra praticamente tudo, então vamos configurar alguns\ndos mais comuns para o nosso projeto.\u003c/p\u003e\n\n\u003ch3 id=\"concat\"\u003eConcat\u003c/h3\u003e\n\n\u003cp\u003eGeralmente quando trabalhamos em um projeto mais complexo, o ideal é modularizar o nosso código Javascript,\ne dividir em diferentes arquivos para facilitar a manutenção. Porém para melhorar a performance do projeto, quanto menos\narquivos carregados melhor. Então como proceder?\u003c/p\u003e\n\n\u003cp\u003eNeste caso podemos utilizar o plugin \u003ca href=\"https://github.com/gruntjs/grunt-contrib-concat\" target=\"_blank\"\u003egrunt-contrib-concat\u003c/a\u003e,\nque como o próprio nome já diz, é utilizado para concatenar arquivos. Dessa forma é possível possuir diversos arquivos\ncom Javascript, e configurar o \u003cem\u003eGrunt\u003c/em\u003e para juntar todos esses arquivos em um só.\u003c/p\u003e\n\n\u003cp\u003ePara instalar o plugin, basta executar o comando abaixo:\u003c/p\u003e\n\n\u003cpre\u003e\n  npm install grunt-contrib-concat --save-dev\n\u003c/pre\u003e\n\n\u003cp\u003eDepois disso, vamos criar o nosso \u003cem\u003eGruntfile.js\u003c/em\u003e, com o seguinte conteúdo:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\nmodule.exports = function(grunt) {\n  // configuração dos plugins\n  grunt.initConfig({\n    concat: {\n      dist: {\n        src: [ 'js/src/functions.js', 'js/src/core.js' ],\n        dest: 'js/dist/projeto.js',\n      }\n    }\n  });\n\n  // carregamento dos plugins\n  grunt.loadNpmTasks('grunt-contrib-concat');\n\n  // definição das tarefas\n  grunt.registerTask('default', ['concat']);\n};\n\u003c/pre\u003e\n\n\u003cp\u003eNo código acima carregamos o plugin \u003ccode\u003egrunt-contrib-concat\u003c/code\u003e, definimos que a\ntarefa \u003cem\u003edefault\u003c/em\u003e deverá executar a tarefa referente ao plugin, e definimos as configurações do plugin.\u003c/p\u003e\n\n\u003cp\u003eNas configurações do plugin o que fizemos foi definir como source os arquivos \u003cem\u003efunctions.js\u003c/em\u003e e \u003cem\u003ecore.js\u003c/em\u003e ambos localizados\nno diretório \u003cem\u003ejs/src\u003c/em\u003e, e definimos como destino um único arquivo chamado \u003cem\u003eprojeto.js\u003c/em\u003e que deverá ser gerado no diretório\n\u003cem\u003ejs/dist\u003c/em\u003e (que é criado caso não exista).\u003c/p\u003e\n\n\u003cp\u003ePortanto, ao executar o comando \u003ccode\u003egrunt\u003c/code\u003e os arquivos \u003cem\u003efunctions.js\u003c/em\u003e e \u003cem\u003ecore.js\u003c/em\u003e serão automaticamente concatenados\nem um novo arquivo chamado \u003cem\u003eprojeto.js\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eMágica não é? :D\u003c/p\u003e\n\n\u003cp\u003eO plugin \u003cem\u003econcat\u003c/em\u003e possui uma série de outras configurações possíveis, mais informações é só consultar a\n\u003ca href=\"https://github.com/gruntjs/grunt-contrib-concat\" target=\"_blank\"\u003edocumentação do plugin\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"uglify\"\u003eUglify\u003c/h3\u003e\n\n\u003cp\u003eUma das práticas mais conhecidas de quem trabalha com frontend é a de minificar arquivos Javascript e CSS,\ndessa forma é possível diminuir o tempo de carregamento da página melhorando a performance e a experiência do usuário.\u003c/p\u003e\n\n\u003cp\u003eDurante algum tempo, o que eu fazia em meus projetos era procurar algum site de minificação\ncomo o \u003ca href=\"http://jscompress.com/\"\u003ehttp://jscompress.com/\u003c/a\u003e, copiar e colar o meu código lá, pegar o código minificado e salvar em um arquivo .min.js.\nE quando eu alterava alguma coisa no arquivo? Exato, tinha que fazer tudo isso de novo.\u003c/p\u003e\n\n\u003cp\u003eO \u003ca href=\"https://github.com/gruntjs/grunt-contrib-uglify\" target=\"_blank\"\u003egrunt-contrib-uglify\u003c/a\u003e é um plugin para o\nGrunt que faz exatamente isso pra você. Nele você pode especificar uma lista de arquivos \u003cem\u003ejs\u003c/em\u003e de entrada e um\narquivo \u003cem\u003ejs\u003c/em\u003e de saída que terá o conteúdo dos arquivos de entrada, e já minificados.\u003c/p\u003e\n\n\u003cp\u003eSabendo disso, então qual a necessidade do \u003cem\u003econcat\u003c/em\u003e? Bem, geralmente em ambiente de desenvolvimento nós não queremos os\narquivos minificados, então o ideal é configurar o grunt para executar o \u003cem\u003econcat\u003c/em\u003e em desenvolvimento,\ne o \u003cem\u003euglify\u003c/em\u003e em uma task de \u003cem\u003ebuild/deploy\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eEntão vamos lá, para instalar o plugin basta rodar o comando abaixo:\u003c/p\u003e\n\n\u003cpre\u003enpm install grunt-contrib-uglify --save-dev\u003c/pre\u003e\n\n\u003cp\u003eApós a instalação vamos adicionar a seguinte configuração ao nosso \u003cem\u003eGruntfile\u003c/em\u003e no objeto passado para a função\n\u003ccode\u003egrunt.initConfig\u003c/code\u003e:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\nuglify: {\n  dist: {\n    files: {\n      'js/dist/projeto.js': [\n        'js/src/functions.js', \n        'js/src/core.js'\n      ]\n    }\n  }\n}\n\u003c/pre\u003e\n\n\u003cp\u003eEntão adicionamos a linha para carregar o plugin:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003egrunt.loadNpmTasks('grunt-contrib-uglify');\u003c/pre\u003e\n\n\u003cp\u003eE vamos definir uma nova task chamada \u003cem\u003edeploy\u003c/em\u003e, que irá executar o \u003cem\u003euglify\u003c/em\u003e.\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003egrunt.registerTask('deploy', ['uglify']);\u003c/pre\u003e\n\n\u003cp\u003eDessa maneira, ao executar o comando \u003ccode\u003egrunt\u003c/code\u003e no terminal, os seus arquivos \u003cem\u003eJavascript\u003c/em\u003e serão concatenados em um único\narquivo chamado \u003cem\u003eprojeto.js\u003c/em\u003e, e ao executar o comando \u003ccode\u003egrunt deploy\u003c/code\u003e eles serão concatenados e minificados.\u003c/p\u003e\n\n\u003ch3 id=\"cssmin\"\u003eCSSMin\u003c/h3\u003e\n\n\u003cp\u003eBeleza, falei que é essencial minificar Javascript e CSS, e mostrei o Uglify que minifica o Javascript. Mas e o CSS?\u003c/p\u003e\n\n\u003cp\u003ePra minificar o CSS tem esse cara aí, \u003ca href=\"https://github.com/gruntjs/grunt-contrib-cssmin\" target=\"_blank\"\u003eCSSMin\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eA instalação do plugin segue o padrão dos plugins anteriores:\u003c/p\u003e\n\n\u003cpre\u003enpm install grunt-contrib-cssmin --save-dev\u003c/pre\u003e\n\n\u003cp\u003eA configuração do plugin no \u003cem\u003eGruntfile\u003c/em\u003e vai ficar assim:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\ncssmin: {\n  dist: {\n    files: {\n      'css/dist/projeto.css': [\n        'css/src/components.css',\n        'css/src/core.css'\n      ]\n    }\n  }\n}\n\u003c/pre\u003e\n\n\u003cp\u003eEntão adicionamos o carregamento do plugin no \u003cem\u003eGruntfile\u003c/em\u003e:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\n  grunt.loadNpmTasks('grunt-contrib-cssmin');\n\u003c/pre\u003e\n\n\u003cp\u003eE alteramos a definição da task de \u003cem\u003edeploy\u003c/em\u003e para executar além do \u003cem\u003euglify\u003c/em\u003e, o \u003cem\u003ecssmin\u003c/em\u003e:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\n  grunt.registerTask('deploy', ['uglify', 'cssmin']);\n\u003c/pre\u003e\n\n\u003cp\u003eNessa configuração do exemplo, assumimos que o nosso projeto possui dois arquivos css, um contendo as definições\ndos componentes utilizados na página, e outro com as configurações mais genéricas. No build nós vamos juntar esses\narquivos e minifica-los em um único arquivo chamado \u003cem\u003eprojeto.css\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eA mesma estratégia do Javascript pode ser utilizada também aqui, usar o \u003cem\u003econcat\u003c/em\u003e em ambiente de desenvolvimento,\ne o \u003cem\u003ecssmin\u003c/em\u003e para deploy.\u003c/p\u003e\n\n\u003ch3 id=\"watch\"\u003eWatch\u003c/h3\u003e\n\n\u003cp\u003eO ser humano é sempre acha um problema em tudo :D , digo isso pois quando eu comecei a usar o \u003cem\u003eGrunt\u003c/em\u003e, mesmo com todas as\nvantagens, eu reclamei do fato de precisar ir até o terminal e rodar o comando \u003ccode\u003egrunt\u003c/code\u003e todas as vezes que\nfizesse alguma alteração no meu projeto.\u003c/p\u003e\n\n\u003cp\u003eSe você estiver achando que vai precisar fazer a mesma coisa, adianto logo que não.\u003c/p\u003e\n\n\u003cfigure class=\"post-figure medium\"\u003e  \n    \u003cimg src=\"/img/posts/web/frontend/grunt/uhu.jpg\" class=\"responsive-image\"\n      alt=\"uhu\"\u003e  \n\u003c/figure\u003e\n\n\u003cp\u003eO Grunt possui um plugin chamado \u003ca href=\"https://github.com/gruntjs/grunt-contrib-watch\" target=\"_blank\"\u003eWatch\u003c/a\u003e\nresponsável por ficar observando os seus arquivos e aguardando que alguma alteração aconteça, e quando acontecer,\nexecutar uma determinada tarefa.\u003c/p\u003e\n\n\u003cp\u003eEntão, o primeiro passo como sempre, instalar o plugin:\u003c/p\u003e\n\n\u003cpre\u003enpm install grunt-contrib-watch --save-dev\u003c/pre\u003e\n\n\u003cp\u003eE vamos adicionar a configuração do plugin, que vai ser a seguinte:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003e\nwatch: {\n  scripts: {\n    files: [\n      'js/src/functions.js',\n      'js/src/core.js'\n    ],\n    tasks : [ 'concat' ]\n  }\n}\n\u003c/pre\u003e\n\n\u003cp\u003eNessa configuração, nós definimos para o \u003cem\u003eWatch\u003c/em\u003e ficar observando alterações nos nossos arquivos Javascript,\ne caso algum deles seja alterado, automaticamente a task \u003cem\u003econcat\u003c/em\u003e será executada.\u003c/p\u003e\n\n\u003cp\u003eAdicionamos o carregamento do plugin:\u003c/p\u003e\n\n\u003cpre data-enlighter-language=\"js\"\u003egrunt.loadNpmTasks('grunt-contrib-watch');\u003c/pre\u003e\n\n\u003cp\u003eE dessa vez não vamos adicionar a task do plugin a nenhuma das tasks que nós definimos, pois uma vez que o watch gera\numa task que fica escutando alterações, ele ocupa o terminal, então deve ser executado sozinho.\u003c/p\u003e\n\n\u003cp\u003ePortanto, após a instalação, carregamento e configuração do \u003cem\u003ewatch\u003c/em\u003e no nosso \u003cem\u003eGruntfile\u003c/em\u003e, só o que precisamos fazer é\nrodar o comando \u003ccode\u003egrunt watch\u003c/code\u003e. Ao fazer isso, o terminal deve exibir algo mais ou menos assim:\u003c/p\u003e\n\n\u003cfigure class=\"post-figure\" style=\"width: 489px\"\u003e  \n  \u003cimg src=\"/img/posts/web/frontend/grunt/grunt-watch-waiting.png\" class=\"responsive-image\"\n      alt=\"Grunt Watch aguardando alterações.\" title=\"Grunt Watch aguardando alterações.\"\u003e  \n  \u003cfigcaption class=\"caption\"\u003eGrunt Watch aguardando alterações.\u003c/figcaption\u003e\n\u003c/figure\u003e\n\n\u003cp\u003eIsso indica que o \u003cem\u003egrunt watch\u003c/em\u003e está executando e aguardando alguma alteração nos arquivos configurados para serem observados.\u003c/p\u003e\n\n\u003cp\u003eAo realizar uma alteração em um dos arquivos, o que deve acontecer é mais ou menos isso:\u003c/p\u003e\n\n\u003cfigure class=\"post-figure medium\" style=\"width: 626px\"\u003e  \n  \u003cimg src=\"/img/posts/web/frontend/grunt/grunt-watch-executing.png\" class=\"responsive-image\"\n      alt=\"Grunt Watch executando uma tarefa.\" title=\"Grunt Watch executando uma tarefa.\"\u003e  \n  \u003cfigcaption class=\"caption\"\u003eGrunt Watch executando uma tarefa.\u003c/figcaption\u003e\n\u003c/figure\u003e\n\n\u003cp\u003ePercebam o que aconteceu. O \u003cem\u003egrunt watch\u003c/em\u003e detectou uma alteração no arquivo \u003cem\u003ecore.js\u003c/em\u003e então executou a task \u003cem\u003econcat\u003c/em\u003e\nconforme foi definido na configuração.\u003c/p\u003e\n\n\u003ch3 id=\"outros-plugins\"\u003eOutros Plugins\u003c/h3\u003e\n\n\u003cp\u003eNós demos uma olhada por alto em alguns dos plugins mais básicos, e mais comuns. Deixo claro que todos eles têm ainda\numa porção de outras configurações possíveis, portanto vale a pena dar uma olhada na documentação detalhada de cada\num e adapta-los para a sua necessidade.\u003c/p\u003e\n\n\u003cp\u003eMas agora que você já conhece o Grunt, o próximo passo é buscar outros plugins que atendam às suas necessidades,\ncomo eu falei, tem plugin pra praticamente tudo. Abaixo listo alguns dos plugins que eu utilizo nos meus projetos:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gruntjs/grunt-contrib-imagemin\" target=\"_blank\"\u003eImageMin\u003c/a\u003e: Compressão de imagens;\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gruntjs/grunt-contrib-copy\" target=\"_blank\"\u003eCopy\u003c/a\u003e: Copia arquivos e diretórios;\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gruntjs/grunt-contrib-copy\" target=\"_blank\"\u003eExec\u003c/a\u003e: Executa comandos shell;\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gruntjs/grunt-contrib-htmlmin\" target=\"_blank\"\u003eHTMLMin\u003c/a\u003e: Minificação de HTML;\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/outaTiME/grunt-replace\" target=\"_blank\"\u003eReplace\u003c/a\u003e: Alteração de trechos de um arquivo seguindo um padrão;\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gruntjs/grunt-contrib-sass\" target=\"_blank\"\u003eSass\u003c/a\u003e: Compila arquivos do\n\u003ca href=\"http://sass-lang.com/\" target=\"_blank\"\u003eSASS\u003c/a\u003e para Css;\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jedrichards/grunt-rsync\" target=\"_blank\"\u003eRsync\u003c/a\u003e: Utiliza o\n\u003ca href=\"http://linux.die.net/man/1/rsync\" target=\"_blank\"\u003ersync\u003c/a\u003e para sincronizar diretórios.\nExcelente como alternativa ao FTP para fazer deploy de aplicações.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eEnfim, existem centenas de outros plugins disponíveis, a página oficial do Grunt oferece uma lista de plugins\n disponíveis, é só ir lá e dar uma olhada.\u003c/p\u003e\n\n\u003ch2 id=\"conclusão\"\u003eConclusão\u003c/h2\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/posts/web/frontend/grunt/conclusao.jpg\" alt=\"Conclusão\" title=\"Conclusão\" class=\"section-image\"\u003e\u003c/p\u003e\n\n\u003cp\u003eEntão pessoal, com isso já dá pra ter uma boa noção de como usar o \u003cem\u003eGrunt\u003c/em\u003e nos seus projetos. Lembrando que o \u003cem\u003eGruntfile\u003c/em\u003e\né um arquivo javascript padrão, logo você pode programar lá dentro conforme as suas necessidades, sem problema algum.\u003c/p\u003e\n\n\u003cp\u003eCaso alguém queira dar uma olhada no “projeto” exemplo completo, é só conferir aqui:\n\u003ca href=\"https://github.com/ProgramAi/tutorial-grunt\"\u003ehttps://github.com/ProgramAi/tutorial-grunt\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eVale mencionar que o Grunt não é a única ferramenta de automação de build disponível no mercado, uma outra\nferramenta que tem muitos adeptos é o \u003ca href=\"http://gulpjs.com/\" target=\"_blank\"\u003eGulp\u003c/a\u003e.\nTem diversos artigos na Web comparando os dois. Vale a pena dar uma avaliada também.\u003c/p\u003e\n\n\u003cp\u003eEntão, por enquanto é isso. Dúvidas, sugestões, opiniões, por favor mandem nos comentários.\u003c/p\u003e\n\n\u003cp\u003eNão esqueçam de acompanhar o blog nas redes sociais.\u003c/p\u003e\n\n\u003cp\u003eValeu e até a próxima.\u003c/p\u003e\n\n\u003cp\u003eBrax!\u003c/p\u003e\n",
    "author": {
      "@type": "Person",
      "name": "Andrew C. Pacifico",
      "url": "http://twitter.com/andrewcpacifico"
    }
  }</script><title>Grunt: Automatizando tarefas de build</title><meta charset="utf-8"><base href="https://programai.com/"><link rel="canonical" href="https://programai.com/web/frontend/grunt"><link rel="publisher" href="http://google.com/&#43;ProgramaiBlog"><meta name="description" content="Trabalha com Frontend Web e não utiliza o Grunt? Está perdendo tempo. Literalmente! Aprenda a instalar, configurar, e aumente sua produtividade agora mesmo."><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="EnlighterJS" content="Advanced javascript based syntax highlighting" data-indent="2" data-selector-block="pre" data-selector-inline="code"><meta property="og:url" content="https://programai.com/web/frontend/grunt"><meta property="og:type" content="article"><meta property="og:title" content="Grunt: Automatizando tarefas de build"><meta property="og:description" content="Trabalha com Frontend Web e não utiliza o Grunt? Está perdendo tempo. Literalmente! Aprenda a instalar, configurar, e aumente sua produtividade agora mesmo."><meta property="og:image" content="https://programai.com/img/posts/web/frontend/grunt/featured.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@programaiblog"><meta name="twitter:creator" content="@andrewcpacifico"><meta name="twitter:title" content="Grunt: Automatizando tarefas de build"><meta name="twitter:description" content="Trabalha com Frontend Web e não utiliza o Grunt? Está perdendo tempo. Literalmente! Aprenda a instalar, configurar, e aumente sua produtividade agora mesmo."><meta name="twitter:image" content="https://programai.com/img/posts/web/frontend/grunt/featured.png"><link rel="stylesheet" href="/css/programai.css" async><link rel="stylesheet" href="/css/EnlighterJS.min.css" async><link rel="stylesheet" href="/css/font-awesome.min.css" async><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic" rel="stylesheet" type="text/css" async></head><body><nav id="top-menu"><main><div id="toggle-top-menu">Menu</div><ul class="menu"><li class="menu-item menu-item-top"><a href="#">Contato</a></li><li class="menu-item menu-item-top"><a href="#">Sobre</a></li><li class="menu-item menu-item-top"><a href="http://facebook.com/programaiblog" target="_blank"><i class="fa fa-facebook"></i></a></li><li class="menu-item menu-item-top"><a href="http://twitter.com/programaiblog" target="_blank"><i class="fa fa-twitter"></i></a></li><li class="menu-item menu-item-top"><a href="http://google.com/&#43;ProgramaiBlog" target="_blank"><i class="fa fa-google-plus"></i></a></li><li class="menu-item menu-item-top"><a href="http://www.youtube.com/c/ProgramaiBlog" target="_blank"><i class="fa fa-youtube-play"></i></a></li></ul></main></nav><header id="site-header"><main class="container"><a href="https://programai.com/"><div id="site-header-logo"></div></a><nav id="main-menu"><div id="toggle-main-menu">Menu</div><ul class="menu"><li class="menu-item mainmenu-item"><a href="/">Início</a></li><li class="menu-item mainmenu-item"><a href="/web/">Web</a></li><li class="menu-item mainmenu-item"><a href="/mobile/">Mobile</a></li></ul></nav></main></header><main id="page-content"><div class="container"><div class="main-content"><article class="post"><header class="post-header"><ol xmlns:v="http://rdf.data-vocabulary.org/#" class="breadcrumb"><li typeof="v:Breadcrumb"><a href="https://programai.com/" rel="v:url" property="v:title">Início</a> »</li><li typeof="v:Breadcrumb"><a href="/web/" rel="v:url" property="v:title">Web </a>»</li><li typeof="v:Breadcrumb"><a href="/web/frontend/" rel="v:url" property="v:title">Frontend </a>»</li><li>Grunt: Automatizando tarefas de build</li></ol><h1 class="post-title">Grunt: Automatizando tarefas de build</h1><p class="post-meta"><time class="post-date">11 de Outubro de 2015 </time>por <span class="post-author"><a href="http://twitter.com/andrewcpacifico" target="_blank"><span class="author-name">Andrew C. Pacifico</span></a></span></p><div class="addthis_inline_share_toolbox"></div><div class="post-image-wrapper"><meta content="https://programai.com/img/posts/web/frontend/grunt/featured.png"><img src="/img/posts/web/frontend/grunt/featured.png" alt="Grunt: Automatizando tarefas de build" class="post-image"></div></header><main class="post-content"><div class="ads-toppost-left"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-8829411195649661" data-ad-slot="6654796833"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><p>Você já parou para pensar em quantas tarefas repetidas você executa na hora de fazer <em>build/deploy</em> do seu projeto de Frontend?</p><p>Vamos pensar em algumas mais comuns:</p><ul style="position: relative; left: 30px"><li>concatenar arquivos css/js;</li><li>minificar css/js;</li><li>processar arquivos sass/less;</li><li>minificar imagens;</li><li>minificar html;</li><li>fazer upload dos arquivos para o servidor;</li></ul><p>Agora tente pensar em quanto tempo você gasta diariamente na realização dessas tarefas. Por alto, podemos dizer que perde-se tempo suficiente para até 5 xícaras de café na copa :D</p><p>Mas então você deve se perguntar, como agilizar esse processo e ganhar essas preciosas 5 doses diárias de café a mais? Eu te respondo, com o <a href="http://gruntjs.com/" target="_blank">Grunt</a>!.</p><h2 id="o-que-é-grunt">O que é Grunt?</h2><p><img src="/img/posts/web/frontend/grunt/duvida.jpg" alt="O que é Grunt?" title="O que é Grunt?" class="section-image"></p><p>O Grunt é uma ferramenta de linha de comando criada pelo <a href="https://twitter.com/cowboy" target="_blank">Ben Alman</a>, e é basicamente um executor tarefas. Sabe todas as tarefas repetitivas listadas agora a pouco, além de todas as outras que você realiza mas não foram listadas? Você pode deixar que o Grunt execute elas para você.</p><h3 id="por-que-usar-um-executor-de-tarefas">Por que usar um executor de tarefas?</h3><p>Em uma palavra: automação. Quanto menos trabalho você tem executando tarefas repetitivas como minificação, compilação, teste de unidade, validação, etc, mais fácil se torna o seu trabalho.</p><p>Depois de configurado, um executor de tarefas pode realizar boa parte do trabalho para você com basicamente nenhum esforço.</p><h3 id="por-que-usar-o-grunt">Por que usar o Grunt?</h3><p>O ecossistema do Grunt é enorme e continua crescendo diariamente. Com literalmente centenas de plugins disponíveis, você pode usar o Grunt para automatizar praticamente qualquer coisa com o mínimo de esforço.</p><p>Se ninguém tiver desenvolvido o que você precisa, criar e publicar o seu próprio plugin do Grunt é extremamente fácil. Aqui você encontra mais detalhes de <a href="http://gruntjs.com/creating-plugins" target="_blank">como criar o seu plugin para o Grunt</a>.</p><h3 id="quem-usa-grunt">Quem usa Grunt?</h3><p>Atualmente o Grunt é utilizado em uma grande quantidade de projetos Web pelo mundo afora. Projetos como jQuery e Bootstrap utilizam o Grunt para automatizar o build. A imagem abaixo demonstra algumas empresas/projetos que utilizam o Grunt.</p><figure class="post-figure medium"><img src="/img/posts/web/frontend/grunt/quem-usa-grunt.png" class="responsive-image" alt="Empresas/Projetos que utilizam Grunt."><figcaption class="caption">Empresas/Projetos que utilizam Grunt.</figcaption></figure><p>Enfim, atualmente considero o Grunt como uma ferramenta indispensável para qualquer projeto de Frontend Web. Se você ainda não está usando, está perdendo tempo (literalmente)!</p><p>Mais detalhes sobre a ferramenta podem ser encontrados na <a href="http://gruntjs.com/" target="_blank">página oficial do Grunt</a>.</p><h2 id="grunt-primeiros-passos">Grunt: Primeiros Passos</h2><p><img src="/img/posts/web/frontend/grunt/primeiros-passos.jpg" alt="Grunt: Primeiros Passos" title="Grunt: Primeiros Passos" class="section-image"></p><p>Então, vou usar o Grunt, do que eu preciso?</p><p>O primeiro passo é entender como o Grunt funciona. O Grunt é implementado em Javascript e roda no <a href="https://nodejs.org/en/" target="_blank">Node.js</a>, então antes de instalar o Grunt você vai precisar ter o <em>node</em> e o <em>npm</em> instalados. Caso você não tenha seguem alguns links de <a href="http://blog.teamtreehouse.com/install-node-js-npm-windows" target="_blank">como instalar o node e npm no Windows</a> e <a href="https://www.digitalocean.com/community/tutorials/como-instalar-o-node-js-em-um-servidor-ubuntu-14-04-pt" target="_blank">como instalar o node e npm no Ubuntu</a>.</p><h3 id="instalação-do-grunt">Instalação do Grunt</h3><p>Tendo instalado o node e o npm na sua máquina, o único trabalho para instalar o Grunt é rodar o seguinte comando:</p><pre>
  npm install -g grunt-cli
</pre><p>Isto vai habilitar o comando <code>grunt</code> no terminal.</p><p>Como você já deve ter notado, instalamos o <em>grunt-cli</em> e não o <em>grunt</em>, a função do <em>grunt-cli</em> é executar o <em>grunt</em> configurado para o projeto. Dessa forma é possível ter vários projetos, cada um rodando uma versão diferente do <em>grunt</em> sem problemas.</p><h3 id="configurando-o-projeto-para-utilizar-o-grunt">Configurando o projeto para utilizar o Grunt</h3><p>Para um projeto utilizar o Grunt, são necessários pelo menos dois arquivos, o <code>package.json</code> e o <code>Gruntfile.js</code>.</p><h3 id="package-json">package.json</h3><p>O arquivo <code>package.json</code> é utilizado pelo <code>npm</code> para armazenar os meta-dados do seu projeto. Informações como nome do projeto, autor, url, licença, repositório e dependências, são todas armazenadas neste arquivo.</p><p>Então é por isso que o Grunt precisa dele, ao instalar um plugin do grunt no projeto, esse plugin é registrado como dependência no arquivo package.json.</p><p>O arquivo <em>package.json</em> deve estar no diretório raiz da sua aplicação. Você pode criar um através do comando <code>npm init</code>.</p><p>Ao rodar o comando <em>npm init</em> ele vai solicitar os dados do seu projeto, nem todos são obrigatórios. Executei o comando aqui, preenchi algumas informações e gerei o seguinte arquivo <em>package.json</em>:</p><pre data-enlighter-language="json">
{
  "name": "projeto",
  "version": "1.0.0",
  "description": "Meu Projeto",
  "main": "package.json",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Andrew Cavalcante Pacifico",
  "license": "Apache"
}
</pre><p>Para instalar o Grunt e os plugins dele no seu projeto, utilize sempre o comando <code>npm install &lt;dependência&gt; --save-dev</code>, dessa forma a dependência é automaticamente adicionada à sessão <em>devDependencies</em> do arquivo <em>package.json</em>.</p><p>A importância de adicionar a dependência à sessão <em>devDependencies</em> do <em>package.json</em>, é que caso você precise configurar o projeto novamente em uma outra máquina, basta rodar o comando <code>npm install</code>, e todas as dependências do projeto (incluindo o Grunt e seus plugins) serão automaticamente instaladas.</p><p>Então vamos instalar o Grunt localmente em nosso projeto. Para isso basta executar o seguinte comando:</p><pre>
  npm install grunt --save-dev
</pre><p>Um diretório chamado <em>node-modules</em> deve ter sido adicionado ao seu projeto, este diretório conterá todas as dependências do seu projeto instaladas via <em>npm</em>.</p><p>Este diretório deve conter um outro diretório chamado <em>grunt</em>, o que indica que o Grunt foi instalado localmente no seu projeto.</p><p>Se você der uma olhada no arquivo <em>package.json</em> verá que ele conterá agora a seguinte sessão:</p><pre data-enlighter-language="json">
"devDependencies": {
  "grunt": "~0.4.5"
}
</pre><p>Isso significa que o grunt foi adicionado como dependência do projeto.</p><p>Caso você esteja utilizando algum software de controle de versão para o seu projeto, é importante ressaltar que apenas o arquivo <em>package.json</em> precisa ser versionado, o diretório <em>node_modules</em> deve ser deixado de fora, uma vez que ele é gerado automaticamente.</p><h3 id="gruntfile-js">Gruntfile.js</h3><p>O <em>Gruntfile.js</em> é o arquivo onde você vai definir e as tarefas e configurar os plugins do Grunt. Ele é um arquivo <em>Javascript</em> que deve ser colocado na raiz do seu projeto junto com o <em>package.json</em>, e assim como ele, também deve ser versionado.</p><p>O <em>Gruntfile</em> é formado basicamente pela configuração do projeto/plugins, pelo carregamento dos plugins do Grunt, definição das tarefas, e uma função que engloba tudo isso. Abaixo temos um exemplo de um <em>Gruntfile</em> básico.</p><pre data-enlighter-language="js">
  module.exports = function(grunt) {
    // configuração dos plugins
    grunt.initConfig({
    });

    // carregamento dos plugins
    grunt.loadNpmTasks('nome-do-plugin');

    // definição das tarefas
    grunt.registerTask('default', []);
  };
</pre><p>No código acima é possível perceber as três seções principais mencionadas.</p><p>Toda a configuração dos plugins e tarefas do Grunt deve ser feita através de um objeto passado como parâmetro para a função <code data-enlighter-language="js">grunt.initConfig()</code>.</p><p>Todos os plugins instalados devem ser carregados através da chamada da função <code data-enlighter-language="js">grunt.loadNpmTasks()</code>.</p><p>E por fim, você pode definir as suas tarefas através da função <code data-enlighter-language="js">grunt.registerTask()</code>. Cada plugin instalado automaticamente cria uma tarefa com o seu nome, mas se o objetivo é automatizar, não faz sentido termos que chamar todas as tarefas uma por uma, então você pode definir uma tarefa <em>default</em> que é executada sempre que o comando <code>grunt</code> for executado, e pode configurar esta tarefa para executar todas as outras.</p><h2 id="plugins-do-grunt">Plugins do Grunt</h2><p><img src="/img/posts/web/frontend/grunt/grunt-plugins.png" alt="Plugins do Grunt" title="Plugins do Grunt" class="section-image"></p><p>Agora que você já sabe como instalar e configurar o <em>Grunt</em>, só o que falta é começar instalar os plugins. Como eu mencionei no início do artigo, o <em>Grunt</em> já tem plugin pra praticamente tudo, então vamos configurar alguns dos mais comuns para o nosso projeto.</p><h3 id="concat">Concat</h3><p>Geralmente quando trabalhamos em um projeto mais complexo, o ideal é modularizar o nosso código Javascript, e dividir em diferentes arquivos para facilitar a manutenção. Porém para melhorar a performance do projeto, quanto menos arquivos carregados melhor. Então como proceder?</p><p>Neste caso podemos utilizar o plugin <a href="https://github.com/gruntjs/grunt-contrib-concat" target="_blank">grunt-contrib-concat</a>, que como o próprio nome já diz, é utilizado para concatenar arquivos. Dessa forma é possível possuir diversos arquivos com Javascript, e configurar o <em>Grunt</em> para juntar todos esses arquivos em um só.</p><p>Para instalar o plugin, basta executar o comando abaixo:</p><pre>
  npm install grunt-contrib-concat --save-dev
</pre><p>Depois disso, vamos criar o nosso <em>Gruntfile.js</em>, com o seguinte conteúdo:</p><pre data-enlighter-language="js">
module.exports = function(grunt) {
  // configuração dos plugins
  grunt.initConfig({
    concat: {
      dist: {
        src: [ 'js/src/functions.js', 'js/src/core.js' ],
        dest: 'js/dist/projeto.js',
      }
    }
  });

  // carregamento dos plugins
  grunt.loadNpmTasks('grunt-contrib-concat');

  // definição das tarefas
  grunt.registerTask('default', ['concat']);
};
</pre><p>No código acima carregamos o plugin <code>grunt-contrib-concat</code>, definimos que a tarefa <em>default</em> deverá executar a tarefa referente ao plugin, e definimos as configurações do plugin.</p><p>Nas configurações do plugin o que fizemos foi definir como source os arquivos <em>functions.js</em> e <em>core.js</em> ambos localizados no diretório <em>js/src</em>, e definimos como destino um único arquivo chamado <em>projeto.js</em> que deverá ser gerado no diretório <em>js/dist</em> (que é criado caso não exista).</p><p>Portanto, ao executar o comando <code>grunt</code> os arquivos <em>functions.js</em> e <em>core.js</em> serão automaticamente concatenados em um novo arquivo chamado <em>projeto.js</em>.</p><p>Mágica não é? :D</p><p>O plugin <em>concat</em> possui uma série de outras configurações possíveis, mais informações é só consultar a <a href="https://github.com/gruntjs/grunt-contrib-concat" target="_blank">documentação do plugin</a>.</p><h3 id="uglify">Uglify</h3><p>Uma das práticas mais conhecidas de quem trabalha com frontend é a de minificar arquivos Javascript e CSS, dessa forma é possível diminuir o tempo de carregamento da página melhorando a performance e a experiência do usuário.</p><p>Durante algum tempo, o que eu fazia em meus projetos era procurar algum site de minificação como o <a href="http://jscompress.com/">http://jscompress.com/</a>, copiar e colar o meu código lá, pegar o código minificado e salvar em um arquivo .min.js. E quando eu alterava alguma coisa no arquivo? Exato, tinha que fazer tudo isso de novo.</p><p>O <a href="https://github.com/gruntjs/grunt-contrib-uglify" target="_blank">grunt-contrib-uglify</a> é um plugin para o Grunt que faz exatamente isso pra você. Nele você pode especificar uma lista de arquivos <em>js</em> de entrada e um arquivo <em>js</em> de saída que terá o conteúdo dos arquivos de entrada, e já minificados.</p><p>Sabendo disso, então qual a necessidade do <em>concat</em>? Bem, geralmente em ambiente de desenvolvimento nós não queremos os arquivos minificados, então o ideal é configurar o grunt para executar o <em>concat</em> em desenvolvimento, e o <em>uglify</em> em uma task de <em>build/deploy</em>.</p><p>Então vamos lá, para instalar o plugin basta rodar o comando abaixo:</p><pre>npm install grunt-contrib-uglify --save-dev</pre><p>Após a instalação vamos adicionar a seguinte configuração ao nosso <em>Gruntfile</em> no objeto passado para a função <code>grunt.initConfig</code>:</p><pre data-enlighter-language="js">
uglify: {
  dist: {
    files: {
      'js/dist/projeto.js': [
        'js/src/functions.js', 
        'js/src/core.js'
      ]
    }
  }
}
</pre><p>Então adicionamos a linha para carregar o plugin:</p><pre data-enlighter-language="js">grunt.loadNpmTasks('grunt-contrib-uglify');</pre><p>E vamos definir uma nova task chamada <em>deploy</em>, que irá executar o <em>uglify</em>.</p><pre data-enlighter-language="js">grunt.registerTask('deploy', ['uglify']);</pre><p>Dessa maneira, ao executar o comando <code>grunt</code> no terminal, os seus arquivos <em>Javascript</em> serão concatenados em um único arquivo chamado <em>projeto.js</em>, e ao executar o comando <code>grunt deploy</code> eles serão concatenados e minificados.</p><h3 id="cssmin">CSSMin</h3><p>Beleza, falei que é essencial minificar Javascript e CSS, e mostrei o Uglify que minifica o Javascript. Mas e o CSS?</p><p>Pra minificar o CSS tem esse cara aí, <a href="https://github.com/gruntjs/grunt-contrib-cssmin" target="_blank">CSSMin</a>.</p><p>A instalação do plugin segue o padrão dos plugins anteriores:</p><pre>npm install grunt-contrib-cssmin --save-dev</pre><p>A configuração do plugin no <em>Gruntfile</em> vai ficar assim:</p><pre data-enlighter-language="js">
cssmin: {
  dist: {
    files: {
      'css/dist/projeto.css': [
        'css/src/components.css',
        'css/src/core.css'
      ]
    }
  }
}
</pre><p>Então adicionamos o carregamento do plugin no <em>Gruntfile</em>:</p><pre data-enlighter-language="js">
  grunt.loadNpmTasks('grunt-contrib-cssmin');
</pre><p>E alteramos a definição da task de <em>deploy</em> para executar além do <em>uglify</em>, o <em>cssmin</em>:</p><pre data-enlighter-language="js">
  grunt.registerTask('deploy', ['uglify', 'cssmin']);
</pre><p>Nessa configuração do exemplo, assumimos que o nosso projeto possui dois arquivos css, um contendo as definições dos componentes utilizados na página, e outro com as configurações mais genéricas. No build nós vamos juntar esses arquivos e minifica-los em um único arquivo chamado <em>projeto.css</em>.</p><p>A mesma estratégia do Javascript pode ser utilizada também aqui, usar o <em>concat</em> em ambiente de desenvolvimento, e o <em>cssmin</em> para deploy.</p><h3 id="watch">Watch</h3><p>O ser humano é sempre acha um problema em tudo :D , digo isso pois quando eu comecei a usar o <em>Grunt</em>, mesmo com todas as vantagens, eu reclamei do fato de precisar ir até o terminal e rodar o comando <code>grunt</code> todas as vezes que fizesse alguma alteração no meu projeto.</p><p>Se você estiver achando que vai precisar fazer a mesma coisa, adianto logo que não.</p><figure class="post-figure medium"><img src="/img/posts/web/frontend/grunt/uhu.jpg" class="responsive-image" alt="uhu"></figure><p>O Grunt possui um plugin chamado <a href="https://github.com/gruntjs/grunt-contrib-watch" target="_blank">Watch</a> responsável por ficar observando os seus arquivos e aguardando que alguma alteração aconteça, e quando acontecer, executar uma determinada tarefa.</p><p>Então, o primeiro passo como sempre, instalar o plugin:</p><pre>npm install grunt-contrib-watch --save-dev</pre><p>E vamos adicionar a configuração do plugin, que vai ser a seguinte:</p><pre data-enlighter-language="js">
watch: {
  scripts: {
    files: [
      'js/src/functions.js',
      'js/src/core.js'
    ],
    tasks : [ 'concat' ]
  }
}
</pre><p>Nessa configuração, nós definimos para o <em>Watch</em> ficar observando alterações nos nossos arquivos Javascript, e caso algum deles seja alterado, automaticamente a task <em>concat</em> será executada.</p><p>Adicionamos o carregamento do plugin:</p><pre data-enlighter-language="js">grunt.loadNpmTasks('grunt-contrib-watch');</pre><p>E dessa vez não vamos adicionar a task do plugin a nenhuma das tasks que nós definimos, pois uma vez que o watch gera uma task que fica escutando alterações, ele ocupa o terminal, então deve ser executado sozinho.</p><p>Portanto, após a instalação, carregamento e configuração do <em>watch</em> no nosso <em>Gruntfile</em>, só o que precisamos fazer é rodar o comando <code>grunt watch</code>. Ao fazer isso, o terminal deve exibir algo mais ou menos assim:</p><figure class="post-figure" style="width: 489px"><img src="/img/posts/web/frontend/grunt/grunt-watch-waiting.png" class="responsive-image" alt="Grunt Watch aguardando alterações." title="Grunt Watch aguardando alterações."><figcaption class="caption">Grunt Watch aguardando alterações.</figcaption></figure><p>Isso indica que o <em>grunt watch</em> está executando e aguardando alguma alteração nos arquivos configurados para serem observados.</p><p>Ao realizar uma alteração em um dos arquivos, o que deve acontecer é mais ou menos isso:</p><figure class="post-figure medium" style="width: 626px"><img src="/img/posts/web/frontend/grunt/grunt-watch-executing.png" class="responsive-image" alt="Grunt Watch executando uma tarefa." title="Grunt Watch executando uma tarefa."><figcaption class="caption">Grunt Watch executando uma tarefa.</figcaption></figure><p>Percebam o que aconteceu. O <em>grunt watch</em> detectou uma alteração no arquivo <em>core.js</em> então executou a task <em>concat</em> conforme foi definido na configuração.</p><h3 id="outros-plugins">Outros Plugins</h3><p>Nós demos uma olhada por alto em alguns dos plugins mais básicos, e mais comuns. Deixo claro que todos eles têm ainda uma porção de outras configurações possíveis, portanto vale a pena dar uma olhada na documentação detalhada de cada um e adapta-los para a sua necessidade.</p><p>Mas agora que você já conhece o Grunt, o próximo passo é buscar outros plugins que atendam às suas necessidades, como eu falei, tem plugin pra praticamente tudo. Abaixo listo alguns dos plugins que eu utilizo nos meus projetos:</p><ul><li><a href="https://github.com/gruntjs/grunt-contrib-imagemin" target="_blank">ImageMin</a>: Compressão de imagens;</li><li><a href="https://github.com/gruntjs/grunt-contrib-copy" target="_blank">Copy</a>: Copia arquivos e diretórios;</li><li><a href="https://github.com/gruntjs/grunt-contrib-copy" target="_blank">Exec</a>: Executa comandos shell;</li><li><a href="https://github.com/gruntjs/grunt-contrib-htmlmin" target="_blank">HTMLMin</a>: Minificação de HTML;</li><li><a href="https://github.com/outaTiME/grunt-replace" target="_blank">Replace</a>: Alteração de trechos de um arquivo seguindo um padrão;</li><li><a href="https://github.com/gruntjs/grunt-contrib-sass" target="_blank">Sass</a>: Compila arquivos do <a href="http://sass-lang.com/" target="_blank">SASS</a> para Css;</li><li><a href="https://github.com/jedrichards/grunt-rsync" target="_blank">Rsync</a>: Utiliza o <a href="http://linux.die.net/man/1/rsync" target="_blank">rsync</a> para sincronizar diretórios. Excelente como alternativa ao FTP para fazer deploy de aplicações.</li></ul><p>Enfim, existem centenas de outros plugins disponíveis, a página oficial do Grunt oferece uma lista de plugins disponíveis, é só ir lá e dar uma olhada.</p><h2 id="conclusão">Conclusão</h2><p><img src="/img/posts/web/frontend/grunt/conclusao.jpg" alt="Conclusão" title="Conclusão" class="section-image"></p><p>Então pessoal, com isso já dá pra ter uma boa noção de como usar o <em>Grunt</em> nos seus projetos. Lembrando que o <em>Gruntfile</em> é um arquivo javascript padrão, logo você pode programar lá dentro conforme as suas necessidades, sem problema algum.</p><p>Caso alguém queira dar uma olhada no “projeto” exemplo completo, é só conferir aqui: <a href="https://github.com/ProgramAi/tutorial-grunt">https://github.com/ProgramAi/tutorial-grunt</a>.</p><p>Vale mencionar que o Grunt não é a única ferramenta de automação de build disponível no mercado, uma outra ferramenta que tem muitos adeptos é o <a href="http://gulpjs.com/" target="_blank">Gulp</a>. Tem diversos artigos na Web comparando os dois. Vale a pena dar uma avaliada também.</p><p>Então, por enquanto é isso. Dúvidas, sugestões, opiniões, por favor mandem nos comentários.</p><p>Não esqueçam de acompanhar o blog nas redes sociais.</p><p>Valeu e até a próxima.</p><p>Brax!</p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8829411195649661" data-ad-slot="3230972433" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></main><footer class="post-footer"><div class="post-meta"><div class="post-category"><a href="/web/frontend/">Frontend</a></div><div class="post-tags"><a href="/tags/build">Build</a>, <a href="/tags/css">Css</a>, <a href="/tags/grunt">Grunt</a>, <a href="/tags/javascript">Javascript</a>, <a href="/tags/node.js">Node.js</a>, <a href="/tags/tutoriais">Tutoriais</a></div></div><div class="share-bar-footer"><h3>Compartilhe</h3><div class="addthis_inline_share_toolbox_7cg1"></div></div><div class="author-data"><h3>Sobre o Autor</h3><div class="author-image"><img src="http://graph.facebook.com/799249256779962/picture?type=large" class="responsive-image" alt="Andrew C. Pacifico" title="Andrew C. Pacifico"></div><div class="author-attributes"><h2 class="author-name">Andrew C. Pacifico</h2><div class="social-profiles"><a target="_blank" href="http://github.com/andrewcpacifico" class="author-github author-social-profile"></a> <a target="_blank" href="http://twitter.com/andrewcpacifico" class="author-twitter author-social-profile"></a> <a target="_blank" href="http://fb.com/andrewcpacifico" class="author-fb author-social-profile"></a> <a target="_blank" href="http://google.com/&#43;AndrewPacifico" class="author-gplus author-social-profile"></a> <a target="_blank" href="http://br.linkedin.com/in/andrewcpacifico" class="author-linkedin author-social-profile"></a></div><div class="author-description">Bacharel em Ciência da Computação pela Universidade Federal do Amazonas, MBA em Gerenciamento de Projetos pela Fundação Getúlio Vargas.<br><br>Atualmente trabalha como Desenvolvedor Web Fullstack na <a href="http://neemu.com/" target="_blank">Neemu</a>.<br><br>Experiência em desenvolvimento nas liguagens C/C++, Java, C#, desenvolvimento Web, e Android.</div></div></div><div class="addthis_relatedposts_inline"></div><div class="post-navigation"><a class="previous-post" href="/mobile/android/como-criar-um-aplicativo-para-android">Como criar um aplicativo para Android</a><div style="clear: both"></div></div></footer></article><div class="post-comments"><div id="disqus_thread"></div><script>if (window.location.href.indexOf('localhost') === -1) {
        var disqus_config = function () {
          this.page.url = 'http:\/\/programai.com\/web\/frontend\/grunt';
          this.page.identifier = '182 http:\/\/programai.com\/?p=182';
        };
        (function() { 
          var d = document, s = d.createElement('script');

          s.src = '//programai.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      }</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div><div class="right-sidebar"><div class="sidebar-widget fb-page-widget"><div class="fb-page" data-href="https://www.facebook.com/programaiblog" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/programaiblog"><a href="https://www.facebook.com/programaiblog">Programa Aí</a></blockquote></div></div></div><div class="sidebar-widget adsense-widget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8829411195649661" data-ad-slot="7102768834" data-ad-format="auto"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></main><footer id="site-footer"><div id="site-info"><div class="container"><div class="copyright">Copyright &copy; 2015-2017 - <a href="https://programai.com/">ProgramAi!</a> - Todos os direitos reservados.</div><div>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a>.</div></div></div></footer><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5878e46df49a90d4" async></script><script src="/js/programai.js" async></script><script src="/js/MooTools-Core-1.6.0-compressed.js"></script><script src="/js/EnlighterJS.min.js"></script><script id="dsq-count-scr" src="//programai.disqus.com/count.js" async></script><div id="fb-root"></div><script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=1225745864103325";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script></body></html>